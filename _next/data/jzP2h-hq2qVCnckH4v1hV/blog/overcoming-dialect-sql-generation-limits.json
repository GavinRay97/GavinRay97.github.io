{"pageProps":{"post":{"mdxSource":"var Component=(()=>{var d=Object.create;var l=Object.defineProperty;var p=Object.getOwnPropertyDescriptor;var h=Object.getOwnPropertyNames;var u=Object.getPrototypeOf,m=Object.prototype.hasOwnProperty;var t=a=>l(a,\"__esModule\",{value:!0});var N=(a,s)=>()=>(s||a((s={exports:{}}).exports,s),s.exports),k=(a,s)=>{t(a);for(var c in s)l(a,c,{get:s[c],enumerable:!0})},g=(a,s,c)=>{if(s&&typeof s==\"object\"||typeof s==\"function\")for(let e of h(s))!m.call(a,e)&&e!==\"default\"&&l(a,e,{get:()=>s[e],enumerable:!(c=p(s,e))||c.enumerable});return a},y=a=>g(t(l(a!=null?d(u(a)):{},\"default\",a&&a.__esModule&&\"default\"in a?{get:()=>a.default,enumerable:!0}:{value:a,enumerable:!0})),a);var r=N((q,o)=>{o.exports=_jsx_runtime});var j={};k(j,{default:()=>b,frontmatter:()=>w});var n=y(r()),w={title:\"AI SQL Generation: Overcoming dialect-specific syntax errors\",date:\"2025-05-17\",tags:[\"sql\",\"text-to-sql\",\"llms\"],draft:!1,summary:\"A discussion on techniques available to overcome semantic errors in syntax when generating dialect-specific SQL\",images:[\"/static/images/ai-sql-generation.png\"]};function f(a={}){let{wrapper:s}=a.components||{};return s?(0,n.jsx)(s,Object.assign({},a,{children:(0,n.jsx)(c,{})})):c();function c(){let e=Object.assign({hr:\"hr\",h1:\"h1\",a:\"a\",span:\"span\",p:\"p\",ul:\"ul\",li:\"li\",blockquote:\"blockquote\",code:\"code\",pre:\"pre\",strong:\"strong\",em:\"em\",ol:\"ol\",h2:\"h2\",img:\"img\",h3:\"h3\"},a.components),{TOCInline:i}=e;return i||_(\"TOCInline\",!0),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(i,{toc:a.toc,indentDepth:3,asDisclosure:!0}),(0,n.jsx)(e.hr,{}),(0,n.jsxs)(e.h1,{id:\"introduction\",children:[(0,n.jsx)(e.a,{href:\"#introduction\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"Introduction\"]}),(0,n.jsx)(e.p,{children:\"Recently, I've noticed several comments about the difficulty of getting LLM's to generate SQL that is valid across multiple dialects.\"}),(0,n.jsxs)(e.ul,{children:[(0,n.jsx)(e.li,{children:(0,n.jsx)(e.a,{href:\"https://news.ycombinator.com/item?id=43812675\",children:\"https://news.ycombinator.com/item?id=43812675\"})}),(0,n.jsx)(e.li,{children:(0,n.jsx)(e.a,{href:\"https://cloud.google.com/blog/products/databases/techniques-for-improving-text-to-sql\",children:\"https://cloud.google.com/blog/products/databases/techniques-for-improving-text-to-sql\"})})]}),(0,n.jsx)(e.p,{children:\"From the Google Cloud article above:\"}),(0,n.jsxs)(e.blockquote,{children:[(0,n.jsx)(e.p,{children:\"Problem #3: Limits of LLM generation\"}),(0,n.jsx)(e.p,{children:\"... But some models can struggle with following precise instructions and getting details exactly right, particularly when it comes to more obscure SQL features. To be able to produce correct SQL, the LLM needs to adhere closely to what can often turn into complex specifications.\"}),(0,n.jsxs)(e.p,{children:[\"Example: Consider the differences between SQL dialects, which are more subtle than differences between programming languages like Python and Java. As a simple example, if you're using BigQuery SQL, the correct function for extracting a month from a timestamp column is \",(0,n.jsx)(e.code,{children:\"EXTRACT(MONTH FROM timestamp_column)\"}),\". But if you are using MySQL, you use \",(0,n.jsx)(e.code,{children:\"MONTH(timestamp_column)\"}),\".\"]})]}),(0,n.jsxs)(e.h1,{id:\"background\",children:[(0,n.jsx)(e.a,{href:\"#background\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"Background\"]}),(0,n.jsx)(e.p,{children:\"My dayjob and work for the last several years involves this exact problem.\"}),(0,n.jsx)(e.p,{children:\"Essentially, I need to preserve and represent the semantics of some particular query across multiple dialects of SQL.\"}),(0,n.jsx)(e.p,{children:\"You might think this is a task that can be solved with a few edge-case conditionals, but the reality is that the nuances of behavior and syntax support across dialects are worse than you likely imagine.\"}),(0,n.jsx)(e.p,{children:\"I'll discuss an approach that has worked for us, which can be used with LLM's as a generation target to solve this issue.\"}),(0,n.jsxs)(e.h1,{id:\"abstract-query-asts\",children:[(0,n.jsx)(e.a,{href:\"#abstract-query-asts\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"Abstract Query AST's\"]}),(0,n.jsx)(e.p,{children:\"Rather than having code which generates direct SQL, use an IR layer that represents the abstract form of a query.\"}),(0,n.jsx)(e.p,{children:\"For example, suppose you have something like:\"}),(0,n.jsx)(e.pre,{className:\"language-sql\",children:(0,n.jsxs)(e.code,{className:\"language-sql code-highlight\",children:[(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token keyword\",children:\"SELECT\"}),\" json_agg\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    json_build_object\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'id'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" u\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"id\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'name'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" u\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"name\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'todos'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"            \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"SELECT\"}),\" json_agg\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"json_build_object\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token string\",children:\"'id'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" t\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"id\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'todo'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" t\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"todo\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"            \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"FROM\"}),` user_todos t\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"            \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"WHERE\"}),\" t\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"user_id \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" u\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),`id\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"        \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token keyword\",children:\"FROM\"}),\" users u\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]})]})}),(0,n.jsx)(e.p,{children:\"You might have a representation like:\"}),(0,n.jsx)(e.pre,{className:\"language-java\",children:(0,n.jsxs)(e.code,{className:\"code-highlight language-java\",children:[(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token function\",children:\"select\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token function\",children:\"jsonArrayAgg\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token function\",children:\"jsonObject\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token string\",children:'\"id\"'}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token function\",children:\"field\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token string\",children:'\"u\"'}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:'\"id\"'}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token string\",children:'\"name\"'}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token function\",children:\"field\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token string\",children:'\"u\"'}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:'\"name\"'}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token string\",children:'\"todos\"'}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token function\",children:\"select\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token function\",children:\"jsonArrayAgg\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token function\",children:\"jsonObject\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"      \",(0,n.jsx)(e.span,{className:\"token string\",children:'\"id\"'}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token function\",children:\"field\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token string\",children:'\"t\"'}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:'\"id\"'}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"      \",(0,n.jsx)(e.span,{className:\"token string\",children:'\"todo\"'}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token function\",children:\"field\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token string\",children:'\"t\"'}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:'\"todo\"'}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token function\",children:\"from\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token string\",children:'\"user_todos\"'}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token function\",children:\"as\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token string\",children:'\"t\"'}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token function\",children:\"where\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token function\",children:\"field\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token string\",children:'\"t\"'}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:'\"user_id\"'}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token function\",children:\"eq\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token function\",children:\"field\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token string\",children:'\"u\"'}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:'\"id\"'}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token function\",children:\"from\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token string\",children:'\"users\"'}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token function\",children:\"as\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token string\",children:'\"u\"'}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),`\n`]})]})}),(0,n.jsx)(e.p,{children:\"And then the query can be rendered/interpreted at runtime into dialect specific SQL like:\"}),(0,n.jsx)(e.pre,{className:\"language-java\",children:(0,n.jsx)(e.code,{className:\"code-highlight language-java\",children:(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token keyword\",children:\"var\"}),\" renderedQuery \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" \",(0,n.jsx)(e.span,{className:\"token function\",children:\"render\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token class-name\",children:\"Database\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"MYSQL\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" queryAST\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),`\n`]})})}),(0,n.jsx)(e.p,{children:\"Many languages have query-builder libraries which allow you to write statements like the above.\"}),(0,n.jsxs)(e.p,{children:[\"On the JVM, we have \",(0,n.jsx)(e.a,{href:\"https://github.com/jOOQ/jOOQ\",children:\"jOOQ\"}),\", but many similar tools exist in other ecosystems, such as Entity Framework, SQL Alchemy, Kysely, and others.\"]}),(0,n.jsxs)(e.h1,{id:\"asking-an-llm-to-generate-a-json-query-for-mysql-postgres-and-trino\",children:[(0,n.jsx)(e.a,{href:\"#asking-an-llm-to-generate-a-json-query-for-mysql-postgres-and-trino\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"Asking an LLM to generate a JSON query for MySQL, Postgres, and Trino\"]}),(0,n.jsxs)(e.p,{children:[\"We can ask an LLM to write us an \",(0,n.jsx)(e.strong,{children:\"abstract query\"}),\" like the one above.\"]}),(0,n.jsx)(e.p,{children:\"Then we can render this query to multiple dialects and view the output.\"}),(0,n.jsx)(e.p,{children:\"For the sake of sharing this online, I will use Scala (sorry) because it's the only JVM language with an online playground that allows importing external libraries (that I know of).\"}),(0,n.jsx)(e.p,{children:\"I asked Claude:\"}),(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://claude.ai/share/df8b9e6b-c01d-409a-a977-11d35f383741\",children:\"https://claude.ai/share/df8b9e6b-c01d-409a-a977-11d35f383741\"})}),(0,n.jsx)(e.blockquote,{children:(0,n.jsxs)(e.p,{children:[\"Please write Scala 3 code to represent the following Postgres SQL query as a jOOQ DSL \",(0,n.jsx)(e.code,{children:\"Query\"}),\". The code should generate a single, inline query and be as succinct as possible.\"]})}),(0,n.jsx)(e.p,{children:\"It output the below:\"}),(0,n.jsx)(e.pre,{className:\"language-scala\",children:(0,n.jsxs)(e.code,{className:\"code-highlight language-scala\",children:[(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token keyword\",children:\"import\"}),\" \",(0,n.jsxs)(e.span,{className:\"token namespace\",children:[\"org\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"jooq\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"impl\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"})]}),`DSL\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token keyword\",children:\"import\"}),\" \",(0,n.jsxs)(e.span,{className:\"token namespace\",children:[\"org\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"jooq\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"impl\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"})]}),\"DSL\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),`_\n`]}),(0,n.jsx)(e.span,{className:\"code-line\",children:`\n`}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token comment\",children:\"// Define the tables\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token keyword\",children:\"val\"}),\" users \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" table\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token string\",children:'\"users\"'}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"as\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token string\",children:'\"u\"'}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token keyword\",children:\"val\"}),\" userTodos \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" table\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token string\",children:'\"user_todos\"'}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"as\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token string\",children:'\"t\"'}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,n.jsx)(e.span,{className:\"code-line\",children:`\n`}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token comment\",children:\"// Create the query\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token keyword\",children:\"val\"}),\" query \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" select\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  jsonArrayAgg\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    jsonObject\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"      key\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token string\",children:'\"id\"'}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"value\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"field\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token string\",children:'\"u.id\"'}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"      key\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token string\",children:'\"name\"'}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"value\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"field\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token string\",children:'\"u.name\"'}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"      key\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token string\",children:'\"todos\"'}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"value\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"        select\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"          jsonArrayAgg\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"            jsonObject\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"              key\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token string\",children:'\"id\"'}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"value\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"field\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token string\",children:'\"t.id\"'}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"              key\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token string\",children:'\"todo\"'}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"value\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"field\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token string\",children:'\"t.todo\"'}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"            \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"          \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"        \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"        \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"from\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"userTodos\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"        \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"where\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"field\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token string\",children:'\"t.user_id\"'}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"eq\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"field\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token string\",children:'\"u.id\"'}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"      \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"from\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"users\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),`\n`]})]})}),(0,n.jsxs)(e.p,{children:[\"We can run this online with \",(0,n.jsx)(e.strong,{children:\"Scastie\"}),\", and view the output:\"]}),(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://scastie.scala-lang.org/HMX9awUVRAuAdLdX7PntRA\",children:\"https://scastie.scala-lang.org/HMX9awUVRAuAdLdX7PntRA\"})}),(0,n.jsx)(e.pre,{className:\"language-scala\",children:(0,n.jsxs)(e.code,{className:\"code-highlight language-scala\",children:[(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token keyword\",children:\"import\"}),\" \",(0,n.jsxs)(e.span,{className:\"token namespace\",children:[\"org\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"jooq\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"})]}),`SQLDialect\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token keyword\",children:\"import\"}),\" \",(0,n.jsxs)(e.span,{className:\"token namespace\",children:[\"org\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"jooq\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"conf\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"})]}),`Settings\n`]}),(0,n.jsx)(e.span,{className:\"code-line\",children:`\n`}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token keyword\",children:\"for\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"dialect \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"<-\"}),\" Seq\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"SQLDialect\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"MYSQL\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" SQLDialect\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"POSTGRES\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" SQLDialect\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"TRINO\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"val\"}),\" ctx \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" DSL\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"using\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"dialect\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" Settings\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"withRenderFormatted\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token boolean\",children:\"true\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    println\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"s\",(0,n.jsx)(e.span,{className:\"token string\",children:'\"Query in ${dialect.name()}:\"'}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    println\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"ctx\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"renderInlined\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"query\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),`\n`]})]})}),(0,n.jsx)(e.p,{children:\"Running this in your browser should give you:\"}),(0,n.jsxs)(\"details\",{children:[(0,n.jsx)(\"summary\",{children:\"\\u{1F447} CLICK TO VIEW OUTPUT \\u{1F447}\"}),(0,n.jsx)(e.pre,{children:(0,n.jsxs)(e.code,{className:\"code-highlight\",children:[(0,n.jsx)(e.span,{className:\"code-line\",children:`============================\n`}),(0,n.jsx)(e.span,{className:\"code-line\",children:`Query in MYSQL:\n`}),(0,n.jsx)(e.span,{className:\"code-line\",children:`set @t = @@group_concat_max_len;\n`}),(0,n.jsx)(e.span,{className:\"code-line\",children:`set @@group_concat_max_len = 4294967295;\n`}),(0,n.jsx)(e.span,{className:\"code-line\",children:`select json_merge_preserve(\n`}),(0,n.jsx)(e.span,{className:\"code-line\",children:`  '[]',\n`}),(0,n.jsx)(e.span,{className:\"code-line\",children:`  concat(\n`}),(0,n.jsx)(e.span,{className:\"code-line\",children:`    '[',\n`}),(0,n.jsx)(e.span,{className:\"code-line\",children:`    group_concat(json_object(\n`}),(0,n.jsx)(e.span,{className:\"code-line\",children:`      'id', u.id,\n`}),(0,n.jsx)(e.span,{className:\"code-line\",children:`      'name', u.name,\n`}),(0,n.jsx)(e.span,{className:\"code-line\",children:`      'todos', (\n`}),(0,n.jsx)(e.span,{className:\"code-line\",children:`        select json_merge_preserve(\n`}),(0,n.jsx)(e.span,{className:\"code-line\",children:`          '[]',\n`}),(0,n.jsx)(e.span,{className:\"code-line\",children:`          concat(\n`}),(0,n.jsx)(e.span,{className:\"code-line\",children:`            '[',\n`}),(0,n.jsx)(e.span,{className:\"code-line\",children:`            group_concat(json_object(\n`}),(0,n.jsx)(e.span,{className:\"code-line\",children:`              'id', t.id,\n`}),(0,n.jsx)(e.span,{className:\"code-line\",children:`              'todo', t.todo\n`}),(0,n.jsx)(e.span,{className:\"code-line\",children:`            ) separator ','),\n`}),(0,n.jsx)(e.span,{className:\"code-line\",children:`            ']'\n`}),(0,n.jsx)(e.span,{className:\"code-line\",children:`          )\n`}),(0,n.jsx)(e.span,{className:\"code-line\",children:`        )\n`}),(0,n.jsx)(e.span,{className:\"code-line\",children:\"        from user_todos as `t`\\n\"}),(0,n.jsx)(e.span,{className:\"code-line\",children:`        where t.user_id = u.id\n`}),(0,n.jsx)(e.span,{className:\"code-line\",children:`      )\n`}),(0,n.jsx)(e.span,{className:\"code-line\",children:`    ) separator ','),\n`}),(0,n.jsx)(e.span,{className:\"code-line\",children:`    ']'\n`}),(0,n.jsx)(e.span,{className:\"code-line\",children:`  )\n`}),(0,n.jsx)(e.span,{className:\"code-line\",children:`)\n`}),(0,n.jsx)(e.span,{className:\"code-line\",children:\"from users as `u`;\\n\"}),(0,n.jsx)(e.span,{className:\"code-line\",children:`set @@group_concat_max_len = @t;\n`}),(0,n.jsx)(e.span,{className:\"code-line\",children:`\n`}),(0,n.jsx)(e.span,{className:\"code-line\",children:`============================\n`}),(0,n.jsx)(e.span,{className:\"code-line\",children:`Query in POSTGRES:\n`}),(0,n.jsx)(e.span,{className:\"code-line\",children:`select json_agg(json_build_object(\n`}),(0,n.jsx)(e.span,{className:\"code-line\",children:`  'id', u.id,\n`}),(0,n.jsx)(e.span,{className:\"code-line\",children:`  'name', u.name,\n`}),(0,n.jsx)(e.span,{className:\"code-line\",children:`  'todos', (\n`}),(0,n.jsx)(e.span,{className:\"code-line\",children:`    select json_agg(json_build_object(\n`}),(0,n.jsx)(e.span,{className:\"code-line\",children:`      'id', t.id,\n`}),(0,n.jsx)(e.span,{className:\"code-line\",children:`      'todo', t.todo\n`}),(0,n.jsx)(e.span,{className:\"code-line\",children:`    ))\n`}),(0,n.jsx)(e.span,{className:\"code-line\",children:`    from user_todos as \"t\"\n`}),(0,n.jsx)(e.span,{className:\"code-line\",children:`    where t.user_id = u.id\n`}),(0,n.jsx)(e.span,{className:\"code-line\",children:`  )\n`}),(0,n.jsx)(e.span,{className:\"code-line\",children:`))\n`}),(0,n.jsx)(e.span,{className:\"code-line\",children:`from users as \"u\"\n`}),(0,n.jsx)(e.span,{className:\"code-line\",children:`\n`}),(0,n.jsx)(e.span,{className:\"code-line\",children:`============================\n`}),(0,n.jsx)(e.span,{className:\"code-line\",children:`Query in TRINO:\n`}),(0,n.jsx)(e.span,{className:\"code-line\",children:`select cast(array_agg(cast(map_from_entries(array[\n`}),(0,n.jsx)(e.span,{className:\"code-line\",children:`  row(\n`}),(0,n.jsx)(e.span,{className:\"code-line\",children:`    'id',\n`}),(0,n.jsx)(e.span,{className:\"code-line\",children:`    cast(u.id as json)\n`}),(0,n.jsx)(e.span,{className:\"code-line\",children:`  ),\n`}),(0,n.jsx)(e.span,{className:\"code-line\",children:`  row(\n`}),(0,n.jsx)(e.span,{className:\"code-line\",children:`    'name',\n`}),(0,n.jsx)(e.span,{className:\"code-line\",children:`    cast(u.name as json)\n`}),(0,n.jsx)(e.span,{className:\"code-line\",children:`  ),\n`}),(0,n.jsx)(e.span,{className:\"code-line\",children:`  row(\n`}),(0,n.jsx)(e.span,{className:\"code-line\",children:`    'todos',\n`}),(0,n.jsx)(e.span,{className:\"code-line\",children:`    cast((\n`}),(0,n.jsx)(e.span,{className:\"code-line\",children:`      select cast(array_agg(cast(map_from_entries(array[\n`}),(0,n.jsx)(e.span,{className:\"code-line\",children:`        row(\n`}),(0,n.jsx)(e.span,{className:\"code-line\",children:`          'id',\n`}),(0,n.jsx)(e.span,{className:\"code-line\",children:`          cast(t.id as json)\n`}),(0,n.jsx)(e.span,{className:\"code-line\",children:`        ),\n`}),(0,n.jsx)(e.span,{className:\"code-line\",children:`        row(\n`}),(0,n.jsx)(e.span,{className:\"code-line\",children:`          'todo',\n`}),(0,n.jsx)(e.span,{className:\"code-line\",children:`          cast(t.todo as json)\n`}),(0,n.jsx)(e.span,{className:\"code-line\",children:`        )\n`}),(0,n.jsx)(e.span,{className:\"code-line\",children:`      ]) as json)) as json)\n`}),(0,n.jsx)(e.span,{className:\"code-line\",children:`      from user_todos \"t\"\n`}),(0,n.jsx)(e.span,{className:\"code-line\",children:`      where t.user_id = u.id\n`}),(0,n.jsx)(e.span,{className:\"code-line\",children:`    ) as json)\n`}),(0,n.jsx)(e.span,{className:\"code-line\",children:`  )\n`}),(0,n.jsx)(e.span,{className:\"code-line\",children:`]) as json)) as json)\n`}),(0,n.jsx)(e.span,{className:\"code-line\",children:`from users \"u\"\n`})]})})]}),(0,n.jsx)(e.blockquote,{children:(0,n.jsxs)(e.p,{children:[\"NOTE: The output isn't \",(0,n.jsx)(e.em,{children:\"100%\"}),\" correct because it omits \",(0,n.jsx)(e.code,{children:'field(name(\"t\", \"user_id\"))'}),\" to properly handle quoting. But we'll give it a break because realistically you would upload the jOOQ API as reference material in production\"]})}),(0,n.jsxs)(e.h1,{id:\"why-the-problem-is-non-trivial\",children:[(0,n.jsx)(e.a,{href:\"#why-the-problem-is-non-trivial\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"Why the Problem is Non-Trivial\"]}),(0,n.jsx)(e.p,{children:\"Let's use the above query as one example of why you can't write some home-spun Query Builder API in an afternoon to solve this problem.\"}),(0,n.jsxs)(e.p,{children:[\"You might think, \",(0,n.jsx)(e.em,{children:`\"Okay, so the syntax for JSON object creation varies between dialects -- I'll just have some interface like:\"`})]}),(0,n.jsx)(e.pre,{className:\"language-ts\",children:(0,n.jsxs)(e.code,{className:\"code-highlight language-ts\",children:[(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token keyword\",children:\"interface\"}),\" \",(0,n.jsx)(e.span,{className:\"token class-name\",children:\"SQLGenerator\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"function\"}),\" \",(0,n.jsx)(e.span,{className:\"token function\",children:\"jsonObject\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"fields\",(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" Record\",(0,n.jsx)(e.span,{className:\"token operator\",children:\"<\"}),(0,n.jsx)(e.span,{className:\"token builtin\",children:\"string\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" SQLExpression\",(0,n.jsx)(e.span,{className:\"token operator\",children:\">\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" SQLExpression\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"function\"}),\" \",(0,n.jsx)(e.span,{className:\"token function\",children:\"jsonArrayAgg\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"expression\",(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" SQLExpression\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" SQLExpression\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),`\n`]})]})}),(0,n.jsx)(e.p,{children:\"But the problem is not so straightforward. Let's look at two examples that I think saliently illustrate this point:\"}),(0,n.jsxs)(e.ol,{children:[(0,n.jsx)(e.li,{children:\"How to represent the above JSON query in various dialects\"}),(0,n.jsxs)(e.li,{children:[\"How to implement \",(0,n.jsx)(e.code,{children:\"generate_series()\"}),\" in various dialects\"]})]}),(0,n.jsxs)(e.h2,{id:\"note-jooqs-translate-online-tool\",children:[(0,n.jsx)(e.a,{href:\"#note-jooqs-translate-online-tool\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),`NOTE: jOOQ's \"Translate\" Online Tool`]}),(0,n.jsxs)(e.p,{children:[\"The following syntax derivations were done using the online jOOQ \",(0,n.jsx)(e.em,{children:'\"Translate\"'}),\" tool.\"]}),(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://www.jooq.org/translate\",children:\"https://www.jooq.org/translate\"})}),(0,n.jsx)(e.p,{children:\"This tool is highly useful if you need to translate SQL into unfamiliar dialects:\"}),(0,n.jsx)(e.p,{children:(0,n.jsx)(e.img,{alt:\"jooq translate online tool screenshot\",src:\"/static/images/jooq-translate-tool.png\"})}),(0,n.jsxs)(e.h2,{id:\"json-query\",children:[(0,n.jsx)(e.a,{href:\"#json-query\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"JSON Query\"]}),(0,n.jsxs)(e.h3,{id:\"mariadb\",children:[(0,n.jsx)(e.a,{href:\"#mariadb\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"MariaDB\"]}),(0,n.jsx)(e.p,{children:\"For some background context, reference the following blogpost by Lukas Eder, jOOQ author:\"}),(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://blog.jooq.org/standard-sql-json-the-sobering-parts/\",children:'\"Standard SQL/JSON \\u2013 The Sobering Parts\"'})}),(0,n.jsx)(e.p,{children:\"The sections on MySQL and MariaDB contain a better description of the various issues than I could give, but for this example the gist of it is:\"}),(0,n.jsxs)(e.ul,{children:[(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.code,{children:\"ORDER BY\"}),\" as part of a JSON expression is not supported, so you've got to use \",(0,n.jsx)(e.code,{children:\"group_concat\"}),\" to build the result\"]}),(0,n.jsxs)(e.li,{children:[\"The maximum length of \",(0,n.jsx)(e.code,{children:\"group_concat\"}),\"'ed expressions is controlled by a DB variable. Creating a string larger than this value will cause cryptic errors about malformed input from \",(0,n.jsx)(e.code,{children:\"json_merge_preserve\"}),\" due to truncation.\"]}),(0,n.jsxs)(e.li,{children:[\"To prevent escaped output when building the JSON, e.g. \",(0,n.jsx)(e.code,{children:'{\"titles\": \"[\\\\\"1984\\\\\",\\\\\"Animal Farm\\\\\",\\\\\"O Alquimista\\\\\",\\\\\"Brida\\\\\"]\"}'}),\", you need to call \",(0,n.jsx)(e.code,{children:\"json_merge_preserve\"})]})]}),(0,n.jsx)(e.pre,{className:\"language-sql\",children:(0,n.jsxs)(e.code,{className:\"language-sql code-highlight\",children:[(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token keyword\",children:\"set\"}),\" \",(0,n.jsx)(e.span,{className:\"token variable\",children:\"@t\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" @\",(0,n.jsx)(e.span,{className:\"token variable\",children:\"@group_concat_max_len\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token keyword\",children:\"set\"}),\" @\",(0,n.jsx)(e.span,{className:\"token variable\",children:\"@group_concat_max_len\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" \",(0,n.jsx)(e.span,{className:\"token number\",children:\"4294967295\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token keyword\",children:\"select\"}),\" json_merge_preserve\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'[]'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  concat\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'['\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    group_concat\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"json_merge_preserve\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"      \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'{}'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"      json_object\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token string\",children:\"'id'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" u\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"id\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"      json_object\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token string\",children:\"'name'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" u\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"name\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"      json_object\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token string\",children:\"'todos'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" json_merge_preserve\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"        \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'[]'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"        \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"          \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"select\"}),\" json_merge_preserve\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"            \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'[]'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"            concat\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"              \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'['\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"              group_concat\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"json_merge_preserve\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"                \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'{}'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"                json_object\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token string\",children:\"'id'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" t\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"id\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"                json_object\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token string\",children:\"'todo'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" t\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"todo\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"              \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" separator \",(0,n.jsx)(e.span,{className:\"token string\",children:\"','\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"              \",(0,n.jsx)(e.span,{className:\"token string\",children:\"']'\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"            \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"          \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"          \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"from\"}),\" user_todos \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"as\"}),` t\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"          \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"where\"}),\" t\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"user_id \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" u\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),`id\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"        \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"      \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" separator \",(0,n.jsx)(e.span,{className:\"token string\",children:\"','\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token string\",children:\"']'\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token keyword\",children:\"from\"}),\" users \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"as\"}),\" u\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token keyword\",children:\"set\"}),\" @\",(0,n.jsx)(e.span,{className:\"token variable\",children:\"@group_concat_max_len\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" \",(0,n.jsx)(e.span,{className:\"token variable\",children:\"@t\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]})]})}),(0,n.jsxs)(e.h3,{id:\"trinoprestoathena\",children:[(0,n.jsx)(e.a,{href:\"#trinoprestoathena\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"Trino/Presto/Athena\"]}),(0,n.jsx)(e.pre,{className:\"language-sql\",children:(0,n.jsxs)(e.code,{className:\"language-sql code-highlight\",children:[(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token keyword\",children:\"select\"}),\" cast\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"array_agg\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"cast\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"map_from_entries\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"array\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"[\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"row\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token string\",children:\"'id'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" cast\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"u\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"id \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"as\"}),\" json\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"row\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token string\",children:\"'name'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" cast\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"u\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"name \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"as\"}),\" json\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"row\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'todos'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    cast\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"      \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"select\"}),\" cast\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"array_agg\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"cast\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"map_from_entries\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"array\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"[\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"        \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"row\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token string\",children:\"'id'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" cast\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"t\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"id \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"as\"}),\" json\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"        \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"row\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token string\",children:\"'todo'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" cast\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"t\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"todo \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"as\"}),\" json\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"      \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"]\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"as\"}),\" json\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"as\"}),\" json\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"      \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"from\"}),` user_todos t\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"      \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"where\"}),\" t\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"user_id \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" u\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),`id\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"as\"}),\" json\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"]\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"as\"}),\" json\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"as\"}),\" json\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token keyword\",children:\"from\"}),` users u\n`]})]})}),(0,n.jsxs)(e.h3,{id:\"sql-server\",children:[(0,n.jsx)(e.a,{href:\"#sql-server\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"SQL Server\"]}),(0,n.jsx)(e.pre,{className:\"language-sql\",children:(0,n.jsxs)(e.code,{className:\"language-sql code-highlight\",children:[(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token keyword\",children:\"select\"}),\" json_arrayagg\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"select\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"select\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"*\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"from\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"      \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"values\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"        u\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"id\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"        u\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"name\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"        json_query\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"          \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"select\"}),\" json_arrayagg\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"            \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"select\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"*\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"            \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"from\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"              \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"values\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"t\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"id\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" t\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"todo\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"            \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" t \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"[\"}),\"id\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"]\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"[\"}),\"todo\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"]\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"            \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"for\"}),\" json path\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" include_null_values\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),` without_array_wrapper\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"          \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"          \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"from\"}),` user_todos t\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"          \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"where\"}),\" t\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"user_id \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" u\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),`id\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"        \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"      \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" t \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"[\"}),\"id\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"]\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"[\"}),\"name\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"]\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"[\"}),\"todos\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"]\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"for\"}),\" json path\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" include_null_values\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),` without_array_wrapper\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token keyword\",children:\"from\"}),` users u\n`]})]})}),(0,n.jsxs)(e.h2,{id:\"generate-series\",children:[(0,n.jsx)(e.a,{href:\"#generate-series\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"Generate Series\"]}),(0,n.jsx)(e.p,{children:\"Now lets look at the SQL for generating a series of integer values from a given range:\"}),(0,n.jsxs)(e.h3,{id:\"postgres\",children:[(0,n.jsx)(e.a,{href:\"#postgres\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"Postgres\"]}),(0,n.jsx)(e.pre,{className:\"language-sql\",children:(0,n.jsx)(e.code,{className:\"language-sql code-highlight\",children:(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token keyword\",children:\"SELECT\"}),\" i \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"FROM\"}),\" generate_series\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token number\",children:\"1\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token number\",children:\"10\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"AS\"}),\" i\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]})})}),(0,n.jsxs)(e.h3,{id:\"clickhouse\",children:[(0,n.jsx)(e.a,{href:\"#clickhouse\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"Clickhouse\"]}),(0,n.jsx)(e.pre,{className:\"language-sql\",children:(0,n.jsxs)(e.code,{className:\"language-sql code-highlight\",children:[(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token keyword\",children:\"select\"}),` i\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token keyword\",children:\"from\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"select\"}),\" cast\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"number \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"as\"}),\" Nullable\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token keyword\",children:\"integer\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),` i\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"from\"}),\" numbers\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token number\",children:\"1\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token number\",children:\"10\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"+\"}),\" \",(0,n.jsx)(e.span,{className:\"token number\",children:\"1\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),` i\n`]})]})}),(0,n.jsxs)(e.h3,{id:\"snowflake\",children:[(0,n.jsx)(e.a,{href:\"#snowflake\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"Snowflake\"]}),(0,n.jsx)(e.pre,{className:\"language-sql\",children:(0,n.jsxs)(e.code,{className:\"language-sql code-highlight\",children:[(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token keyword\",children:\"select\"}),` i\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token keyword\",children:\"from\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"select\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"row_number\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"over\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token keyword\",children:\"order\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"by\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"select\"}),\" \",(0,n.jsx)(e.span,{className:\"token number\",children:\"1\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"+\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token number\",children:\"1\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"-\"}),\" \",(0,n.jsx)(e.span,{className:\"token number\",children:\"1\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),` i\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"from\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"table\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"generator\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token keyword\",children:\"rowcount\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),(0,n.jsx)(e.span,{className:\"token operator\",children:\">\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token number\",children:\"10\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"-\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token number\",children:\"1\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"-\"}),\" \",(0,n.jsx)(e.span,{className:\"token number\",children:\"1\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),` i\n`]})]})}),(0,n.jsxs)(e.h3,{id:\"oracle\",children:[(0,n.jsx)(e.a,{href:\"#oracle\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"Oracle\"]}),(0,n.jsx)(e.pre,{className:\"language-sql\",children:(0,n.jsxs)(e.code,{className:\"language-sql code-highlight\",children:[(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token keyword\",children:\"select\"}),` i\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token keyword\",children:\"from\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"select\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token keyword\",children:\"level\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"+\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token number\",children:\"1\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"-\"}),\" \",(0,n.jsx)(e.span,{className:\"token number\",children:\"1\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),` i\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"from\"}),` DUAL\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"connect\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"by\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"level\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"<=\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token number\",children:\"10\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"+\"}),\" \",(0,n.jsx)(e.span,{className:\"token number\",children:\"1\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"-\"}),\" \",(0,n.jsx)(e.span,{className:\"token number\",children:\"1\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),` i\n`]})]})}),(0,n.jsxs)(e.h3,{id:\"mysql\",children:[(0,n.jsx)(e.a,{href:\"#mysql\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"MySQL\"]}),(0,n.jsx)(e.pre,{className:\"language-sql\",children:(0,n.jsxs)(e.code,{className:\"language-sql code-highlight\",children:[(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token keyword\",children:\"select\"}),` i\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token keyword\",children:\"from\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"with\"}),` recursive\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    i\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"i\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"as\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"      \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"select\"}),\" \",(0,n.jsx)(e.span,{className:\"token number\",children:\"1\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"      \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"union\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"all\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"      \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"select\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"i \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"+\"}),\" \",(0,n.jsx)(e.span,{className:\"token number\",children:\"1\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"      \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"from\"}),` i\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"      \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"where\"}),\" i \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"<\"}),\" \",(0,n.jsx)(e.span,{className:\"token number\",children:\"10\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"select\"}),` i\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"from\"}),` i\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"as\"}),` i\n`]})]})}),(0,n.jsxs)(e.h1,{id:\"conclusion\",children:[(0,n.jsx)(e.a,{href:\"#conclusion\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"Conclusion\"]}),(0,n.jsx)(e.p,{children:\"I hope this post has given you a sense for how leveraging an abstract Query IR as your SQL generation target can help deal with the complexities of portable, cross-dialect SQL.\"}),(0,n.jsx)(e.p,{children:\"It's proven an effective strategy for what I use it for.\"}),(0,n.jsx)(e.blockquote,{children:(0,n.jsx)(e.p,{children:\"AI Disclaimer: ChatGPT 4.1 was used to generate the Open Graph image for this post.\"})})]})}}var b=f;function _(a,s){throw new Error(\"Expected \"+(s?\"component\":\"object\")+\" `\"+a+\"` to be defined: you likely forgot to import, pass, or provide it.\")}return j;})();\n;return Component;","toc":[{"value":"Introduction","url":"#introduction","depth":1},{"value":"Background","url":"#background","depth":1},{"value":"Abstract Query AST's","url":"#abstract-query-asts","depth":1},{"value":"Asking an LLM to generate a JSON query for MySQL, Postgres, and Trino","url":"#asking-an-llm-to-generate-a-json-query-for-mysql-postgres-and-trino","depth":1},{"value":"Why the Problem is Non-Trivial","url":"#why-the-problem-is-non-trivial","depth":1},{"value":"NOTE: jOOQ's \"Translate\" Online Tool","url":"#note-jooqs-translate-online-tool","depth":2},{"value":"JSON Query","url":"#json-query","depth":2},{"value":"MariaDB","url":"#mariadb","depth":3},{"value":"Trino/Presto/Athena","url":"#trinoprestoathena","depth":3},{"value":"SQL Server","url":"#sql-server","depth":3},{"value":"Generate Series","url":"#generate-series","depth":2},{"value":"Postgres","url":"#postgres","depth":3},{"value":"Clickhouse","url":"#clickhouse","depth":3},{"value":"Snowflake","url":"#snowflake","depth":3},{"value":"Oracle","url":"#oracle","depth":3},{"value":"MySQL","url":"#mysql","depth":3},{"value":"Conclusion","url":"#conclusion","depth":1}],"frontMatter":{"readingTime":{"text":"12 min read","minutes":11.34,"time":680400,"words":2268},"slug":"overcoming-dialect-sql-generation-limits","fileName":"overcoming-dialect-sql-generation-limits.md","title":"AI SQL Generation: Overcoming dialect-specific syntax errors","date":"2025-05-17T00:00:00.000Z","tags":["sql","text-to-sql","llms"],"draft":false,"summary":"A discussion on techniques available to overcome semantic errors in syntax when generating dialect-specific SQL","images":["/static/images/ai-sql-generation.png"]}},"authorDetails":[{"readingTime":{"text":"1 min read","minutes":0.9,"time":54000,"words":180},"slug":["default"],"fileName":"default.md","name":"Gavin Ray","avatar":"/static/images/me.png","occupation":"Code Stuff","company":"PromptQL (formerly known as Hasura)","email":"ray.gavin97@gmail.com","twitter":"https://twitter.com/GavinRayDev","linkedin":"https://www.linkedin.com","github":"https://github.com/GavinRay97","date":null}],"prev":{"title":"What good are Record Patterns in Java? An example based on Spark's Catalyst Optimizer and it's Tree Rewriting Rules","date":"2023-02-04T00:00:00.000Z","tags":["java","jdk","jvm"],"draft":false,"summary":"A tutorial on how to use Java's new Record Patterns feature to write powerful, concise pattern matching code for usecases like AST transformations and rewrite-rules in compiler passes.\n","images":["/static/images/ast-visualization.png"],"slug":"what-good-are-record-patterns"},"next":{"title":"Psychedelics as Tools: Reflections After 20+ Compounds and a Decade of Experiments","date":"2025-07-12T00:00:00.000Z","tags":["non-technical","psychedelics"],"draft":false,"summary":"Reflections and hard-won lessons from a decade exploring over 20 psychedelic compounds.","images":["/static/images/Ouroborous-benzene.svg"],"slug":"perspectives-on-psychedelic-use"}},"__N_SSG":true}