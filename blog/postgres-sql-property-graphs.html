<!DOCTYPE html><html lang="en" class="scroll-smooth"><head><link rel="apple-touch-icon" sizes="76x76" href="/static/favicons/apple-touch-icon.png"/><link rel="icon" type="image/png" sizes="32x32" href="/static/favicons/favicon-32x32.png"/><link rel="icon" type="image/png" sizes="16x16" href="/static/favicons/favicon-16x16.png"/><link rel="manifest" href="/static/favicons/site.webmanifest"/><link rel="mask-icon" href="/static/favicons/safari-pinned-tab.svg" color="#5bbad5"/><meta name="msapplication-TileColor" content="#000000"/><meta name="theme-color" content="#000000"/><link rel="alternate" type="application/rss+xml" href="/feed.xml"/><meta charSet="utf-8"/><script>!function(){try {var d=document.documentElement.classList;d.remove('light','dark');var e=localStorage.getItem('theme');if("system"===e||(!e&&true)){var t="(prefers-color-scheme: dark)",m=window.matchMedia(t);m.media!==t||m.matches?d.add('dark'):d.add('light')}else if(e) d.add(e)}catch(e){}}()</script><meta content="width=device-width, initial-scale=1" name="viewport"/><title>Experimenting with SQL:2023 Property-Graph Queries in Postgres 18</title><meta name="robots" content="follow, index"/><meta name="description" content="Hands-on guide to the upcoming SQL/PGQ graph syntax using a patched Postgres 18 beta."/><meta property="og:url" content="https://gavinray97.github.io/blog/postgres-sql-property-graphs"/><meta property="og:type" content="article"/><meta property="og:site_name" content="Gavin Ray Blog"/><meta property="og:description" content="Hands-on guide to the upcoming SQL/PGQ graph syntax using a patched Postgres 18 beta."/><meta property="og:title" content="Experimenting with SQL:2023 Property-Graph Queries in Postgres 18"/><meta property="og:image" content="https://gavinray97.github.io/static/images/postgres-sql-pgq-banner.png"/><meta name="twitter:card" content="summary_large_image"/><meta name="twitter:site" content="https://twitter.com/GavinRayDev"/><meta name="twitter:title" content="Experimenting with SQL:2023 Property-Graph Queries in Postgres 18"/><meta name="twitter:description" content="Hands-on guide to the upcoming SQL/PGQ graph syntax using a patched Postgres 18 beta."/><meta name="twitter:image" content="https://gavinray97.github.io/static/images/postgres-sql-pgq-banner.png"/><link rel="canonical" href="https://gavinray97.github.io/blog/postgres-sql-property-graphs"/><meta property="article:published_time" content="2025-07-19T00:00:00.000Z"/><script type="application/ld+json">{
  "@context": "https://schema.org",
  "@type": "Article",
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https://gavinray97.github.io/blog/postgres-sql-property-graphs"
  },
  "headline": "Experimenting with SQL:2023 Property-Graph Queries in Postgres 18",
  "image": [
    {
      "@type": "ImageObject",
      "url": "https://gavinray97.github.io/static/images/postgres-sql-pgq-banner.png"
    }
  ],
  "datePublished": "2025-07-19T00:00:00.000Z",
  "dateModified": "2025-07-19T00:00:00.000Z",
  "author": [
    {
      "@type": "Person",
      "name": "Gavin Ray"
    }
  ],
  "publisher": {
    "@type": "Organization",
    "name": "Gavin Ray",
    "logo": {
      "@type": "ImageObject",
      "url": "https://gavinray97.github.io/static/images/logo.png"
    }
  },
  "description": "Hands-on guide to the upcoming SQL/PGQ graph syntax using a patched Postgres 18 beta."
}</script><meta name="next-head-count" content="20"/><link rel="preload" href="/_next/static/css/11bf37f52e8561b6.css" as="style"/><link rel="stylesheet" href="/_next/static/css/11bf37f52e8561b6.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-5cd94c89d3acac5f.js"></script><script src="/_next/static/chunks/webpack-7bdcdf64985b3467.js" defer=""></script><script src="/_next/static/chunks/main-bb8a1082161dc7c2.js" defer=""></script><script src="/_next/static/chunks/pages/_app-da15d2a3f366f449.js" defer=""></script><script src="/_next/static/chunks/framework-327e104994690a53.js" defer=""></script><script src="/_next/static/chunks/207-dd685ae53e609b20.js" defer=""></script><script src="/_next/static/chunks/620-407ce78f2f46843c.js" defer=""></script><script src="/_next/static/chunks/pages/blog/%5B...slug%5D-52c7b4963ecd0646.js" defer=""></script><script src="/_next/static/jzP2h-hq2qVCnckH4v1hV/_buildManifest.js" defer=""></script><script src="/_next/static/jzP2h-hq2qVCnckH4v1hV/_ssgManifest.js" defer=""></script><script src="/_next/static/jzP2h-hq2qVCnckH4v1hV/_middlewareManifest.js" defer=""></script></head><body class="bg-white text-black antialiased dark:bg-gray-900 dark:text-white"><div id="__next" data-reactroot=""><div class="mx-auto max-w-3xl px-4 sm:px-6 xl:max-w-5xl xl:px-0"><div class="flex h-screen flex-col justify-between"><header class="flex items-center justify-between py-10"><div><a aria-label="" href="/"><div class="flex items-center justify-between"><div class="mr-3"></div><div class="hidden h-6 text-2xl font-semibold sm:block"></div></div></a></div><div class="flex items-center text-base leading-5"><div class="hidden sm:block"><a class="p-1 font-medium text-gray-900 dark:text-gray-100 sm:p-4" href="/blog">Blog</a><a class="p-1 font-medium text-gray-900 dark:text-gray-100 sm:p-4" href="/tags">Tags</a><a class="p-1 font-medium text-gray-900 dark:text-gray-100 sm:p-4" href="/projects">Projects</a><a class="p-1 font-medium text-gray-900 dark:text-gray-100 sm:p-4" href="/about">About</a></div><button aria-label="Toggle Dark Mode" type="button" class="ml-1 mr-1 h-8 w-8 rounded p-1 sm:ml-4"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="text-gray-900 dark:text-gray-100"><path d="M17.293 13.293A8 8 0 016.707 2.707a8.001 8.001 0 1010.586 10.586z"></path></svg></button><div class="sm:hidden"><button type="button" class="ml-1 mr-1 h-8 w-8 rounded py-1" aria-label="Toggle Menu"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="text-gray-900 dark:text-gray-100"><path fill-rule="evenodd" d="M3 5a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 10a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 15a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z" clip-rule="evenodd"></path></svg></button><div class="fixed top-24 right-0 z-10 h-full w-full transform bg-gray-200 opacity-95 duration-300 ease-in-out dark:bg-gray-800 translate-x-full"><button type="button" aria-label="toggle modal" class="fixed h-full w-full cursor-auto focus:outline-none"></button><nav class="fixed mt-8 h-full"><div class="px-12 py-4"><a class="text-2xl font-bold tracking-widest text-gray-900 dark:text-gray-100" href="/blog">Blog</a></div><div class="px-12 py-4"><a class="text-2xl font-bold tracking-widest text-gray-900 dark:text-gray-100" href="/tags">Tags</a></div><div class="px-12 py-4"><a class="text-2xl font-bold tracking-widest text-gray-900 dark:text-gray-100" href="/projects">Projects</a></div><div class="px-12 py-4"><a class="text-2xl font-bold tracking-widest text-gray-900 dark:text-gray-100" href="/about">About</a></div></nav></div></div></div></header><main class="mb-auto"><div class="mx-auto max-w-3xl px-4 sm:px-6 xl:max-w-5xl xl:px-0"><div class="fixed right-8 bottom-8 hidden flex-col gap-3 md:hidden"><button aria-label="Scroll To Comment" type="button" class="rounded-full bg-gray-200 p-2 text-gray-500 transition-all hover:bg-gray-300 dark:bg-gray-700 dark:text-gray-400 dark:hover:bg-gray-600"><svg class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M18 10c0 3.866-3.582 7-8 7a8.841 8.841 0 01-4.083-.98L2 17l1.338-3.123C2.493 12.767 2 11.434 2 10c0-3.866 3.582-7 8-7s8 3.134 8 7zM7 9H5v2h2V9zm8 0h-2v2h2V9zM9 9h2v2H9V9z" clip-rule="evenodd"></path></svg></button><button aria-label="Scroll To Top" type="button" class="rounded-full bg-gray-200 p-2 text-gray-500 transition-all hover:bg-gray-300 dark:bg-gray-700 dark:text-gray-400 dark:hover:bg-gray-600"><svg class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M3.293 9.707a1 1 0 010-1.414l6-6a1 1 0 011.414 0l6 6a1 1 0 01-1.414 1.414L11 5.414V17a1 1 0 11-2 0V5.414L4.707 9.707a1 1 0 01-1.414 0z" clip-rule="evenodd"></path></svg></button></div><article><div class="xl:divide-y xl:divide-gray-200 xl:dark:divide-gray-700"><header class="pt-6 xl:pb-6"><div class="space-y-1 text-center"><dl class="space-y-10"><div><dt class="sr-only">Published on</dt><dd class="text-base font-medium leading-6 text-gray-500 dark:text-gray-400"><time dateTime="2025-07-19T00:00:00.000Z">Saturday, July 19, 2025</time></dd></div></dl><div><h1 class="text-3xl font-extrabold leading-9 tracking-tight text-gray-900 dark:text-gray-100 sm:text-4xl sm:leading-10 md:text-5xl md:leading-14">Experimenting with SQL:2023 Property-Graph Queries in Postgres 18</h1></div></div></header><div class="divide-y divide-gray-200 pb-8 dark:divide-gray-700 xl:grid xl:grid-cols-4 xl:gap-x-6 xl:divide-y-0" style="grid-template-rows:auto 1fr"><dl class="pt-6 pb-10 xl:border-b xl:border-gray-200 xl:pt-11 xl:dark:border-gray-700"><dt class="sr-only">Authors</dt><dd><ul class="flex justify-center space-x-8 sm:space-x-12 xl:block xl:space-x-0 xl:space-y-8"><li class="flex items-center space-x-2"><img src="/static/images/me.png" width="38px" height="38px" alt="avatar" class="h-10 w-10 rounded-full"/><dl class="whitespace-nowrap text-sm font-medium leading-5"><dt class="sr-only">Name</dt><dd class="text-gray-900 dark:text-gray-100">Gavin Ray</dd><dt class="sr-only">Twitter</dt><dd><a target="_blank" rel="noopener noreferrer" href="https://twitter.com/GavinRayDev" class="text-primary-500 hover:text-primary-600 dark:hover:text-primary-400">@GavinRayDev</a></dd></dl></li></ul></dd></dl><div class="divide-y divide-gray-200 dark:divide-gray-700 xl:col-span-3 xl:row-span-2 xl:pb-0"><div class="prose max-w-none pt-10 pb-8 dark:prose-dark"><details open=""><summary class="ml-6 pb-2 pt-2 text-xl font-bold">Table of Contents</summary><div class="ml-6"><ul><li><a href="#intro">Intro</a></li><li><a href="#docker-image-with-postgres-18beta2--sqlpgq-patches">Docker Image with Postgres 18beta2 + SQL/PGQ Patches</a></li><li><a href="#example-e-commerce-product-recommendations">Example: E-Commerce Product Recommendations</a></li><li><a href="#patch-and-build-details">Patch and Build Details</a></li><li><a href="#further-reading">Further Reading</a></li><li><a href="#conclusion">Conclusion</a></li></ul></div></details><hr/><p><strong>TL;DR</strong><br/>Grab the Docker image below, connect with <code>psql</code>, and try the recommendation-graph query. SQL/PGQ feels like Cypher without leaving home.</p><h1 id="intro"><a href="#intro" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>Intro</h1><p>SQL:2023 introduced a new syntax for graph querying.</p><p>This graph query language is called &quot;SQL/PGQ&quot;. You can read more about it below:</p><ul><li><a target="_blank" rel="noopener noreferrer" href="https://www.iso.org/standard/79473.html">https://www.iso.org/standard/79473.html</a></li><li><a target="_blank" rel="noopener noreferrer" href="https://www.postgresql.org/message-id/a855795d-e697-4fa5-8698-d20122126567%40eisentraut.org">https://www.postgresql.org/message-id/a855795d-e697-4fa5-8698-d20122126567%40eisentraut.org</a></li><li><a target="_blank" rel="noopener noreferrer" href="https://blogs.oracle.com/database/post/property-graphs-in-oracle-database-23ai-the-sql-pgq-standard">https://blogs.oracle.com/database/post/property-graphs-in-oracle-database-23ai-the-sql-pgq-standard</a></li></ul><p>To date, only Oracle 23 has released support for it, but I want to show you how you can experiment with SQL/PGQ today in Postgres.</p><h1 id="docker-image-with-postgres-18beta2--sqlpgq-patches"><a href="#docker-image-with-postgres-18beta2--sqlpgq-patches" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>Docker Image with Postgres 18beta2 + SQL/PGQ Patches</h1><p>I&#x27;ve published a Docker image which contains the latest release of Postgres and applies the SQL/PGQ patches from the mailing list.</p><div class="relative"><pre><code class="code-highlight language-sh"><span class="code-line">docker run -d \
</span><span class="code-line">  --name postgres-pgq \
</span><span class="code-line">  -p 5432:5432 \
</span><span class="code-line">  -v postgres-data:/var/lib/postgresql/data \
</span><span class="code-line">  -e PGDATA=/var/lib/postgresql/data \
</span><span class="code-line">  -e POSTGRES_PASSWORD=postgres \
</span><span class="code-line">  gavinray/postgres-18beta2-pgql:latest
</span><span class="code-line">
</span><span class="code-line">docker exec -it postgres-pgq psql -U postgres -d postgres
</span></code></pre></div><p>You can find the source below. Please excuse the Cthonian horror that is the <code>Dockerfile</code>. <a target="_blank" rel="noopener noreferrer" href="https://github.com/GavinRay97/postgres-18beta2-sql-pgl">https://github.com/GavinRay97/postgres-18beta2-sql-pgl</a></p><h1 id="example-e-commerce-product-recommendations"><a href="#example-e-commerce-product-recommendations" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>Example: E-Commerce Product Recommendations</h1><p>This example has been done to death, but it&#x27;s a good way to showcase PGQ.</p><p>Suppose we&#x27;ve got <code>users</code>, a list of <code>products</code>, and <code>purchases</code>:</p><div class="relative"><pre><code class="language-sql code-highlight"><span class="code-line"><span class="token comment">-- Node Table: Users</span>
</span><span class="code-line"><span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> users <span class="token punctuation">(</span>
</span><span class="code-line">    id <span class="token keyword">INT</span> GENERATED ALWAYS <span class="token keyword">AS</span> <span class="token keyword">IDENTITY</span><span class="token punctuation">,</span>
</span><span class="code-line">    name <span class="token keyword">TEXT</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span>
</span><span class="code-line"><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token comment">-- Node Table: Products</span>
</span><span class="code-line"><span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> products <span class="token punctuation">(</span>
</span><span class="code-line">    id <span class="token keyword">INT</span> GENERATED ALWAYS <span class="token keyword">AS</span> <span class="token keyword">IDENTITY</span><span class="token punctuation">,</span>
</span><span class="code-line">    name <span class="token keyword">TEXT</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>
</span><span class="code-line">    price <span class="token keyword">NUMERIC</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span>
</span><span class="code-line"><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token comment">-- Edge Table: Purchases linking users and products</span>
</span><span class="code-line"><span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> purchases <span class="token punctuation">(</span>
</span><span class="code-line">    user_id <span class="token keyword">INT</span> <span class="token keyword">REFERENCES</span> users<span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">,</span>
</span><span class="code-line">    product_id <span class="token keyword">INT</span> <span class="token keyword">REFERENCES</span> products<span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">,</span>
</span><span class="code-line">    purchase_date <span class="token keyword">DATE</span> <span class="token keyword">DEFAULT</span> <span class="token keyword">CURRENT_DATE</span><span class="token punctuation">,</span>
</span><span class="code-line">    <span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span> <span class="token punctuation">(</span>user_id<span class="token punctuation">,</span> product_id<span class="token punctuation">)</span>
</span><span class="code-line"><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span></code></pre></div><p>And suppose that we have <code>Alice</code> and <code>Bob</code>. <code>Alice</code> buys a laptop and a mouse, <code>Bob</code> buys a laptop and a keyboard:</p><div class="relative"><pre><code class="language-sql code-highlight"><span class="code-line"><span class="token keyword">INSERT</span> <span class="token keyword">INTO</span>
</span><span class="code-line">    users <span class="token punctuation">(</span>name<span class="token punctuation">)</span>
</span><span class="code-line"><span class="token keyword">VALUES</span>
</span><span class="code-line">    <span class="token punctuation">(</span><span class="token string">&#x27;Alice&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment">-- id 1</span>
</span><span class="code-line">    <span class="token punctuation">(</span><span class="token string">&#x27;Bob&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">-- id 2</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token keyword">INSERT</span> <span class="token keyword">INTO</span>
</span><span class="code-line">    products <span class="token punctuation">(</span>name<span class="token punctuation">,</span> price<span class="token punctuation">)</span>
</span><span class="code-line"><span class="token keyword">VALUES</span>
</span><span class="code-line">    <span class="token punctuation">(</span><span class="token string">&#x27;Laptop&#x27;</span><span class="token punctuation">,</span> <span class="token number">1200.00</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment">-- id 1</span>
</span><span class="code-line">    <span class="token punctuation">(</span><span class="token string">&#x27;Mouse&#x27;</span><span class="token punctuation">,</span> <span class="token number">25.00</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment">-- id 2</span>
</span><span class="code-line">    <span class="token punctuation">(</span><span class="token string">&#x27;Keyboard&#x27;</span><span class="token punctuation">,</span> <span class="token number">75.00</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">-- id 3</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token comment">-- Insert purchases (edges)</span>
</span><span class="code-line"><span class="token keyword">INSERT</span> <span class="token keyword">INTO</span>
</span><span class="code-line">    purchases <span class="token punctuation">(</span>user_id<span class="token punctuation">,</span> product_id<span class="token punctuation">)</span>
</span><span class="code-line"><span class="token keyword">VALUES</span>
</span><span class="code-line">    <span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment">-- Alice bought a Laptop</span>
</span><span class="code-line">    <span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment">-- Alice bought a Mouse</span>
</span><span class="code-line">    <span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment">-- Bob bought a Laptop (the shared item)</span>
</span><span class="code-line">    <span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">-- Bob bought a Keyboard (the recommendation)</span>
</span></code></pre></div><p>Now we can get into the meat of things: the Property Graph definition and a query over it.</p><p>We start by defining a <code>PROPERTY GRAPH</code>, and declaring <code>VERTEX</code> and <code>EDGE</code> tables for it. The documentation for this DDL statement can be found at:</p><ul><li><a target="_blank" rel="noopener noreferrer" href="https://docs.oracle.com/en/database/oracle/oracle-database/23/sqlrf/create-property-graph.html">https://docs.oracle.com/en/database/oracle/oracle-database/23/sqlrf/create-property-graph.html</a></li></ul><div class="relative"><pre><code class="language-sql code-highlight"><span class="code-line"><span class="token keyword">CREATE</span> PROPERTY GRAPH recommender_graph
</span><span class="code-line">VERTEX <span class="token keyword">TABLES</span> <span class="token punctuation">(</span>
</span><span class="code-line">    users LABEL users PROPERTIES <span class="token punctuation">(</span>id<span class="token punctuation">,</span> name<span class="token punctuation">)</span><span class="token punctuation">,</span>
</span><span class="code-line">    products LABEL product PROPERTIES <span class="token punctuation">(</span>id<span class="token punctuation">,</span> name<span class="token punctuation">,</span> price<span class="token punctuation">)</span>
</span><span class="code-line"><span class="token punctuation">)</span>
</span><span class="code-line">EDGE <span class="token keyword">TABLES</span> <span class="token punctuation">(</span>
</span><span class="code-line">    purchases
</span><span class="code-line">    SOURCE <span class="token keyword">KEY</span> <span class="token punctuation">(</span>user_id<span class="token punctuation">)</span> <span class="token keyword">REFERENCES</span> users <span class="token punctuation">(</span>id<span class="token punctuation">)</span>
</span><span class="code-line">    DESTINATION <span class="token keyword">KEY</span> <span class="token punctuation">(</span>product_id<span class="token punctuation">)</span> <span class="token keyword">REFERENCES</span> products <span class="token punctuation">(</span>id<span class="token punctuation">)</span>
</span><span class="code-line">    LABEL BOUGHT
</span><span class="code-line"><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span></code></pre></div><p><img alt="graphviz image of user purchases" src="/static/images/product-purchase-graph.svg"/></p><p>Now, we can ask a question like: &quot;What are similar products that Alice hasn&#x27;t yet purchased?&quot;</p><p>The syntax for that statement in PGQL (well, one representation of it), is:</p><div class="relative"><pre><code class="language-sql code-highlight"><span class="code-line"><span class="token comment">-- (Alice) -&gt; (Shared Product) &lt;- (Similar User) -&gt; (Recommended Product)</span>
</span><span class="code-line"><span class="token keyword">SELECT</span> <span class="token keyword">DISTINCT</span> g<span class="token punctuation">.</span>rec_id<span class="token punctuation">,</span> g<span class="token punctuation">.</span>rec_name
</span><span class="code-line"><span class="token keyword">FROM</span> GRAPH_TABLE <span class="token punctuation">(</span>
</span><span class="code-line">       recommender_graph
</span><span class="code-line">       <span class="token keyword">MATCH</span>   <span class="token punctuation">(</span>me  <span class="token operator">IS</span> users    <span class="token keyword">WHERE</span> me<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">&#x27;Alice&#x27;</span><span class="token punctuation">)</span>
</span><span class="code-line">               <span class="token operator">-</span><span class="token punctuation">[</span>:BOUGHT<span class="token punctuation">]</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token punctuation">(</span>p   <span class="token operator">IS</span> product<span class="token punctuation">)</span><span class="token operator">&lt;</span><span class="token operator">-</span><span class="token punctuation">[</span>:BOUGHT<span class="token punctuation">]</span><span class="token operator">-</span><span class="token punctuation">(</span>sim <span class="token operator">IS</span> users<span class="token punctuation">)</span>
</span><span class="code-line">               <span class="token operator">-</span><span class="token punctuation">[</span>:BOUGHT<span class="token punctuation">]</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token punctuation">(</span>rec <span class="token operator">IS</span> product<span class="token punctuation">)</span>
</span><span class="code-line">       <span class="token keyword">COLUMNS</span> <span class="token punctuation">(</span>me<span class="token punctuation">.</span>id  <span class="token keyword">AS</span> uid<span class="token punctuation">,</span>
</span><span class="code-line">                rec<span class="token punctuation">.</span>id <span class="token keyword">AS</span> rec_id<span class="token punctuation">,</span>
</span><span class="code-line">                rec<span class="token punctuation">.</span>name <span class="token keyword">AS</span> rec_name<span class="token punctuation">)</span>
</span><span class="code-line"><span class="token punctuation">)</span> <span class="token keyword">AS</span> g
</span><span class="code-line"><span class="token keyword">WHERE</span> <span class="token operator">NOT</span> <span class="token keyword">EXISTS</span> <span class="token punctuation">(</span>
</span><span class="code-line">        <span class="token keyword">SELECT</span> <span class="token number">1</span>
</span><span class="code-line">        <span class="token keyword">FROM</span>   purchases p
</span><span class="code-line">        <span class="token keyword">WHERE</span>  p<span class="token punctuation">.</span>user_id    <span class="token operator">=</span> g<span class="token punctuation">.</span>uid
</span><span class="code-line">          <span class="token operator">AND</span>  p<span class="token punctuation">.</span>product_id <span class="token operator">=</span> g<span class="token punctuation">.</span>rec_id
</span><span class="code-line"><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span></code></pre></div><p>That should return:</p><div class="relative"><pre><code class="code-highlight language-md"><span class="code-line"><span class="token table"><span class="token table-header-row"><span class="token punctuation">|</span><span class="token important table-header"> Rec id </span><span class="token punctuation">|</span><span class="token important table-header"> Rec name </span><span class="token punctuation">|</span>
</span></span></span><span class="code-line"><span class="token table"><span class="token table-header-row"></span><span class="token table-line"><span class="token punctuation">|</span> <span class="token punctuation">:-----</span> <span class="token punctuation">|</span> <span class="token punctuation">:-------</span> <span class="token punctuation">|</span>
</span></span></span><span class="code-line"><span class="token table"><span class="token table-line"></span><span class="token table-data-rows"><span class="token punctuation">|</span><span class="token table-data"> 3      </span><span class="token punctuation">|</span><span class="token table-data"> Keyboard </span><span class="token punctuation">|</span>
</span></span></span></code></pre></div><p>It seems that <code>Alice</code>, having purchased a laptop and a mouse, might appreciate a keyboard! Neat.</p><h1 id="patch-and-build-details"><a href="#patch-and-build-details" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>Patch and Build Details</h1><p>This image was built by applying the most recent collection of patches supplied in the mailing list thread from Junwang Zhao on top of the <code>18beta2</code> source tarzip.</p><ul><li><a target="_blank" rel="noopener noreferrer" href="https://www.postgresql.org/message-id/CAEG8a3L3uZZRT5Ra5%3D9G-SOCEYULejw5eqQE99VL0YfTeX3-BA%40mail.gmail.com">https://www.postgresql.org/message-id/CAEG8a3L3uZZRT5Ra5%3D9G-SOCEYULejw5eqQE99VL0YfTeX3-BA%40mail.gmail.com</a></li></ul><div class="relative"><pre><code class="code-highlight"><span class="code-line">Attachment	Content-Type	Size
</span><span class="code-line">v10-0011-do-not-use-default-COLLATE.patch	application/octet-stream	5.8 KB
</span><span class="code-line">v10-0012-trivial-refactor-of-property-graph-object-addres.patch	application/octet-stream	17.1 KB
</span><span class="code-line">v10-0010-adapt-property-graph-to-more-intuitive-titles.patch	application/octet-stream	2.6 KB
</span><span class="code-line">v10-0008-Document-fixes.patch	application/octet-stream	5.1 KB
</span><span class="code-line">v10-0009-WIP-Do-not-print-empty-columns-table-for-a-prope.patch	application/octet-stream	14.1 KB
</span><span class="code-line">v10-0007-RLS-tests.patch	application/octet-stream	182.1 KB
</span><span class="code-line">v10-0006-Property-collation-and-edge-vertex-link-support.patch	application/octet-stream	114.3 KB
</span><span class="code-line">v10-0005-Access-permissions-on-property-graph.patch	application/octet-stream	11.9 KB
</span><span class="code-line">v10-0004-Fixes-following-issues.patch	application/octet-stream	36.2 KB
</span><span class="code-line">v10-0003-Support-cyclic-path-pattern.patch	application/octet-stream	37.4 KB
</span><span class="code-line">v10-0002-support-WHERE-clause-in-graph-pattern.patch	application/octet-stream	7.2 KB
</span><span class="code-line">v10-0001-WIP-SQL-Property-Graph-Queries-SQL-PGQ.patch	application/octet-stream	504.4 KB
</span></code></pre></div><p>Additionally, there are some hacky patches in the Dockerfile that strip out a bunch of functionality related to Serbian locale and stemming, to fix compilation errors.</p><h1 id="further-reading"><a href="#further-reading" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>Further Reading</h1><ul><li><a target="_blank" rel="noopener noreferrer" href="https://pgconf.in/conferences/pgconfin2025/program/proposals/895">https://pgconf.in/conferences/pgconfin2025/program/proposals/895</a></li><li><a target="_blank" rel="noopener noreferrer" href="https://www.enterprisedb.com/blog/representing-graphs-postgresql-sqlpgq">https://www.enterprisedb.com/blog/representing-graphs-postgresql-sqlpgq</a></li></ul><h1 id="conclusion"><a href="#conclusion" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>Conclusion</h1><p>I don&#x27;t often work in domains that can benefit from the ergonomic enhancements that Property Graphs can provide, but I think it&#x27;s an invaluable addition to the ISO SQL Standard.</p><p>Looking forward to the day this gets merged in Postgres =)</p></div><div class="pt-6 pb-6 text-sm text-gray-700 dark:text-gray-300"><a target="_blank" rel="nofollow" href="https://mobile.twitter.com/search?q=https%3A%2F%2Fgavinray97.github.io%2Fblog%2Fpostgres-sql-property-graphs">Discuss on Twitter</a> • <a target="_blank" rel="noopener noreferrer" href="https://github.com/GavinRay97/GavinRay97.github.io/blob/master/data/blog/postgres-sql-property-graphs.md">View on GitHub</a></div><div id="comment"></div></div><footer><div class="divide-gray-200 text-sm font-medium leading-5 dark:divide-gray-700 xl:col-start-1 xl:row-start-2 xl:divide-y"><div class="py-4 xl:py-8"><h2 class="text-xs uppercase tracking-wide text-gray-500 dark:text-gray-400">Tags</h2><div class="flex flex-wrap"><a class="mr-3 text-sm font-medium uppercase text-primary-500 hover:text-primary-600 dark:hover:text-primary-400" href="/tags/postgres">postgres</a><a class="mr-3 text-sm font-medium uppercase text-primary-500 hover:text-primary-600 dark:hover:text-primary-400" href="/tags/sql">sql</a></div></div><div class="flex justify-between py-4 xl:block xl:space-y-8 xl:py-8"><div><h2 class="text-xs uppercase tracking-wide text-gray-500 dark:text-gray-400">Previous Article</h2><div class="text-primary-500 hover:text-primary-600 dark:hover:text-primary-400"><a href="/blog/perspectives-on-psychedelic-use">Psychedelics as Tools: Reflections After 20+ Compounds and a Decade of Experiments</a></div></div><div><h2 class="text-xs uppercase tracking-wide text-gray-500 dark:text-gray-400">Next Article</h2><div class="text-primary-500 hover:text-primary-600 dark:hover:text-primary-400"><a href="/blog/absurdity-of-ai-engineer-title">The Absurdity of the term &quot;AI Engineer&quot;</a></div></div></div></div><div class="pt-4 xl:pt-8"><a class="text-primary-500 hover:text-primary-600 dark:hover:text-primary-400" href="/blog">← Back to the blog</a></div></footer></div></div></article></div></main><footer><div class="mt-16 flex flex-col items-center"><div class="mb-3 flex space-x-4"><a class="text-sm text-gray-500 transition hover:text-gray-600" target="_blank" rel="noopener noreferrer" href="mailto:ray.gavin97@gmail.com"><span class="sr-only">mail</span><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" class="fill-current text-gray-700 hover:text-blue-500 dark:text-gray-200 dark:hover:text-blue-400 h-6 w-6"><path d="M2.003 5.884 10 9.882l7.997-3.998A2 2 0 0 0 16 4H4a2 2 0 0 0-1.997 1.884z"></path><path d="m18 8.118-8 4-8-4V14a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8.118z"></path></svg></a><a class="text-sm text-gray-500 transition hover:text-gray-600" target="_blank" rel="noopener noreferrer" href="https://github.com/GavinRay97"><span class="sr-only">github</span><svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" class="fill-current text-gray-700 hover:text-blue-500 dark:text-gray-200 dark:hover:text-blue-400 h-6 w-6"><path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"></path></svg></a><a class="text-sm text-gray-500 transition hover:text-gray-600" target="_blank" rel="noopener noreferrer" href="https://twitter.com/GavinRayDev"><span class="sr-only">twitter</span><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="fill-current text-gray-700 hover:text-blue-500 dark:text-gray-200 dark:hover:text-blue-400 h-6 w-6"><path d="M23.953 4.57a10 10 0 0 1-2.825.775 4.958 4.958 0 0 0 2.163-2.723c-.951.555-2.005.959-3.127 1.184a4.92 4.92 0 0 0-8.384 4.482C7.69 8.095 4.067 6.13 1.64 3.162a4.822 4.822 0 0 0-.666 2.475c0 1.71.87 3.213 2.188 4.096a4.904 4.904 0 0 1-2.228-.616v.06a4.923 4.923 0 0 0 3.946 4.827 4.996 4.996 0 0 1-2.212.085 4.936 4.936 0 0 0 4.604 3.417 9.867 9.867 0 0 1-6.102 2.105c-.39 0-.779-.023-1.17-.067a13.995 13.995 0 0 0 7.557 2.209c9.053 0 13.998-7.496 13.998-13.985 0-.21 0-.42-.015-.63A9.935 9.935 0 0 0 24 4.59z"></path></svg></a></div><div class="mb-2 flex space-x-2 text-sm text-gray-500 dark:text-gray-400"><div>Gavin Ray</div><div> • </div><div>© 2026</div><div> • </div><a href="/">Gavin Ray Blog</a></div><div class="mb-8 text-sm text-gray-500 dark:text-gray-400"><a target="_blank" rel="noopener noreferrer" href="https://github.com/timlrx/tailwind-nextjs-starter-blog">Tailwind Nextjs Theme</a></div></div></footer></div></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"post":{"mdxSource":"var Component=(()=\u003e{var d=Object.create;var l=Object.defineProperty;var p=Object.getOwnPropertyDescriptor;var h=Object.getOwnPropertyNames;var m=Object.getPrototypeOf,u=Object.prototype.hasOwnProperty;var i=a=\u003el(a,\"__esModule\",{value:!0});var N=(a,s)=\u003e()=\u003e(s||a((s={exports:{}}).exports,s),s.exports),k=(a,s)=\u003e{i(a);for(var c in s)l(a,c,{get:s[c],enumerable:!0})},g=(a,s,c)=\u003e{if(s\u0026\u0026typeof s==\"object\"||typeof s==\"function\")for(let n of h(s))!u.call(a,n)\u0026\u0026n!==\"default\"\u0026\u0026l(a,n,{get:()=\u003es[n],enumerable:!(c=p(s,n))||c.enumerable});return a},w=a=\u003eg(i(l(a!=null?d(m(a)):{},\"default\",a\u0026\u0026a.__esModule\u0026\u0026\"default\"in a?{get:()=\u003ea.default,enumerable:!0}:{value:a,enumerable:!0})),a);var r=N((A,o)=\u003e{o.exports=_jsx_runtime});var f={};k(f,{default:()=\u003eE,frontmatter:()=\u003eb});var e=w(r()),b={title:\"Experimenting with SQL:2023 Property-Graph Queries in Postgres 18\",date:\"2025-07-19\",tags:[\"postgres\",\"sql\"],draft:!1,summary:\"Hands-on guide to the upcoming SQL/PGQ graph syntax using a patched Postgres 18 beta.\",images:[\"/static/images/postgres-sql-pgq-banner.png\"]};function y(a={}){let{wrapper:s}=a.components||{};return s?(0,e.jsx)(s,Object.assign({},a,{children:(0,e.jsx)(c,{})})):c();function c(){let n=Object.assign({hr:\"hr\",p:\"p\",strong:\"strong\",br:\"br\",code:\"code\",h1:\"h1\",a:\"a\",span:\"span\",ul:\"ul\",li:\"li\",pre:\"pre\",img:\"img\"},a.components),{TOCInline:t}=n;return t||T(\"TOCInline\",!0),(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(t,{toc:a.toc,indentDepth:4,asDisclosure:!0}),(0,e.jsx)(n.hr,{}),(0,e.jsxs)(n.p,{children:[(0,e.jsx)(n.strong,{children:\"TL;DR\"}),(0,e.jsx)(n.br,{}),\"Grab the Docker image below, connect with \",(0,e.jsx)(n.code,{children:\"psql\"}),\", and try the recommendation-graph query. SQL/PGQ feels like Cypher without leaving home.\"]}),(0,e.jsxs)(n.h1,{id:\"intro\",children:[(0,e.jsx)(n.a,{href:\"#intro\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"Intro\"]}),(0,e.jsx)(n.p,{children:\"SQL:2023 introduced a new syntax for graph querying.\"}),(0,e.jsx)(n.p,{children:'This graph query language is called \"SQL/PGQ\". You can read more about it below:'}),(0,e.jsxs)(n.ul,{children:[(0,e.jsx)(n.li,{children:(0,e.jsx)(n.a,{href:\"https://www.iso.org/standard/79473.html\",children:\"https://www.iso.org/standard/79473.html\"})}),(0,e.jsx)(n.li,{children:(0,e.jsx)(n.a,{href:\"https://www.postgresql.org/message-id/a855795d-e697-4fa5-8698-d20122126567%40eisentraut.org\",children:\"https://www.postgresql.org/message-id/a855795d-e697-4fa5-8698-d20122126567%40eisentraut.org\"})}),(0,e.jsx)(n.li,{children:(0,e.jsx)(n.a,{href:\"https://blogs.oracle.com/database/post/property-graphs-in-oracle-database-23ai-the-sql-pgq-standard\",children:\"https://blogs.oracle.com/database/post/property-graphs-in-oracle-database-23ai-the-sql-pgq-standard\"})})]}),(0,e.jsx)(n.p,{children:\"To date, only Oracle 23 has released support for it, but I want to show you how you can experiment with SQL/PGQ today in Postgres.\"}),(0,e.jsxs)(n.h1,{id:\"docker-image-with-postgres-18beta2--sqlpgq-patches\",children:[(0,e.jsx)(n.a,{href:\"#docker-image-with-postgres-18beta2--sqlpgq-patches\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"Docker Image with Postgres 18beta2 + SQL/PGQ Patches\"]}),(0,e.jsx)(n.p,{children:\"I've published a Docker image which contains the latest release of Postgres and applies the SQL/PGQ patches from the mailing list.\"}),(0,e.jsx)(n.pre,{children:(0,e.jsxs)(n.code,{className:\"code-highlight language-sh\",children:[(0,e.jsx)(n.span,{className:\"code-line\",children:`docker run -d \\\\\n`}),(0,e.jsx)(n.span,{className:\"code-line\",children:`  --name postgres-pgq \\\\\n`}),(0,e.jsx)(n.span,{className:\"code-line\",children:`  -p 5432:5432 \\\\\n`}),(0,e.jsx)(n.span,{className:\"code-line\",children:`  -v postgres-data:/var/lib/postgresql/data \\\\\n`}),(0,e.jsx)(n.span,{className:\"code-line\",children:`  -e PGDATA=/var/lib/postgresql/data \\\\\n`}),(0,e.jsx)(n.span,{className:\"code-line\",children:`  -e POSTGRES_PASSWORD=postgres \\\\\n`}),(0,e.jsx)(n.span,{className:\"code-line\",children:`  gavinray/postgres-18beta2-pgql:latest\n`}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsx)(n.span,{className:\"code-line\",children:`docker exec -it postgres-pgq psql -U postgres -d postgres\n`})]})}),(0,e.jsxs)(n.p,{children:[\"You can find the source below. Please excuse the Cthonian horror that is the \",(0,e.jsx)(n.code,{children:\"Dockerfile\"}),\". \",(0,e.jsx)(n.a,{href:\"https://github.com/GavinRay97/postgres-18beta2-sql-pgl\",children:\"https://github.com/GavinRay97/postgres-18beta2-sql-pgl\"})]}),(0,e.jsxs)(n.h1,{id:\"example-e-commerce-product-recommendations\",children:[(0,e.jsx)(n.a,{href:\"#example-e-commerce-product-recommendations\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"Example: E-Commerce Product Recommendations\"]}),(0,e.jsx)(n.p,{children:\"This example has been done to death, but it's a good way to showcase PGQ.\"}),(0,e.jsxs)(n.p,{children:[\"Suppose we've got \",(0,e.jsx)(n.code,{children:\"users\"}),\", a list of \",(0,e.jsx)(n.code,{children:\"products\"}),\", and \",(0,e.jsx)(n.code,{children:\"purchases\"}),\":\"]}),(0,e.jsx)(n.pre,{className:\"language-sql\",children:(0,e.jsxs)(n.code,{className:\"language-sql code-highlight\",children:[(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token comment\",children:\"-- Node Table: Users\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"CREATE\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"TABLE\"}),\" users \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    id \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"INT\"}),\" GENERATED ALWAYS \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"AS\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"IDENTITY\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    name \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"TEXT\"}),\" \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"NOT\"}),\" \",(0,e.jsx)(n.span,{className:\"token boolean\",children:\"NULL\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token comment\",children:\"-- Node Table: Products\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"CREATE\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"TABLE\"}),\" products \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    id \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"INT\"}),\" GENERATED ALWAYS \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"AS\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"IDENTITY\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    name \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"TEXT\"}),\" \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"NOT\"}),\" \",(0,e.jsx)(n.span,{className:\"token boolean\",children:\"NULL\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    price \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"NUMERIC\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token number\",children:\"10\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,e.jsx)(n.span,{className:\"token number\",children:\"2\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token comment\",children:\"-- Edge Table: Purchases linking users and products\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"CREATE\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"TABLE\"}),\" purchases \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    user_id \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"INT\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"REFERENCES\"}),\" users\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"id\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    product_id \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"INT\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"REFERENCES\"}),\" products\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"id\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    purchase_date \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"DATE\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"DEFAULT\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"CURRENT_DATE\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"PRIMARY\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"KEY\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"user_id\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" product_id\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]})]})}),(0,e.jsxs)(n.p,{children:[\"And suppose that we have \",(0,e.jsx)(n.code,{children:\"Alice\"}),\" and \",(0,e.jsx)(n.code,{children:\"Bob\"}),\". \",(0,e.jsx)(n.code,{children:\"Alice\"}),\" buys a laptop and a mouse, \",(0,e.jsx)(n.code,{children:\"Bob\"}),\" buys a laptop and a keyboard:\"]}),(0,e.jsx)(n.pre,{className:\"language-sql\",children:(0,e.jsxs)(n.code,{className:\"language-sql code-highlight\",children:[(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"INSERT\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"INTO\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    users \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"name\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"VALUES\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token string\",children:\"'Alice'\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,e.jsx)(n.span,{className:\"token comment\",children:\"-- id 1\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token string\",children:\"'Bob'\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),\" \",(0,e.jsx)(n.span,{className:\"token comment\",children:\"-- id 2\"}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"INSERT\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"INTO\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    products \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"name\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" price\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"VALUES\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token string\",children:\"'Laptop'\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,e.jsx)(n.span,{className:\"token number\",children:\"1200.00\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,e.jsx)(n.span,{className:\"token comment\",children:\"-- id 1\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token string\",children:\"'Mouse'\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,e.jsx)(n.span,{className:\"token number\",children:\"25.00\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,e.jsx)(n.span,{className:\"token comment\",children:\"-- id 2\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token string\",children:\"'Keyboard'\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,e.jsx)(n.span,{className:\"token number\",children:\"75.00\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),\" \",(0,e.jsx)(n.span,{className:\"token comment\",children:\"-- id 3\"}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token comment\",children:\"-- Insert purchases (edges)\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"INSERT\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"INTO\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    purchases \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"user_id\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" product_id\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"VALUES\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token number\",children:\"1\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,e.jsx)(n.span,{className:\"token number\",children:\"1\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,e.jsx)(n.span,{className:\"token comment\",children:\"-- Alice bought a Laptop\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token number\",children:\"1\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,e.jsx)(n.span,{className:\"token number\",children:\"2\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,e.jsx)(n.span,{className:\"token comment\",children:\"-- Alice bought a Mouse\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token number\",children:\"2\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,e.jsx)(n.span,{className:\"token number\",children:\"1\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,e.jsx)(n.span,{className:\"token comment\",children:\"-- Bob bought a Laptop (the shared item)\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token number\",children:\"2\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,e.jsx)(n.span,{className:\"token number\",children:\"3\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),\" \",(0,e.jsx)(n.span,{className:\"token comment\",children:\"-- Bob bought a Keyboard (the recommendation)\"}),`\n`]})]})}),(0,e.jsx)(n.p,{children:\"Now we can get into the meat of things: the Property Graph definition and a query over it.\"}),(0,e.jsxs)(n.p,{children:[\"We start by defining a \",(0,e.jsx)(n.code,{children:\"PROPERTY GRAPH\"}),\", and declaring \",(0,e.jsx)(n.code,{children:\"VERTEX\"}),\" and \",(0,e.jsx)(n.code,{children:\"EDGE\"}),\" tables for it. The documentation for this DDL statement can be found at:\"]}),(0,e.jsx)(n.ul,{children:(0,e.jsx)(n.li,{children:(0,e.jsx)(n.a,{href:\"https://docs.oracle.com/en/database/oracle/oracle-database/23/sqlrf/create-property-graph.html\",children:\"https://docs.oracle.com/en/database/oracle/oracle-database/23/sqlrf/create-property-graph.html\"})})}),(0,e.jsx)(n.pre,{className:\"language-sql\",children:(0,e.jsxs)(n.code,{className:\"language-sql code-highlight\",children:[(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"CREATE\"}),` PROPERTY GRAPH recommender_graph\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"VERTEX \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"TABLES\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    users LABEL users PROPERTIES \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"id\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" name\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    products LABEL product PROPERTIES \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"id\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" name\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" price\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"EDGE \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"TABLES\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`    purchases\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    SOURCE \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"KEY\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"user_id\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"REFERENCES\"}),\" users \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"id\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    DESTINATION \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"KEY\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"product_id\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"REFERENCES\"}),\" products \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"id\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`    LABEL BOUGHT\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]})]})}),(0,e.jsx)(n.p,{children:(0,e.jsx)(n.img,{alt:\"graphviz image of user purchases\",src:\"/static/images/product-purchase-graph.svg\"})}),(0,e.jsx)(n.p,{children:`Now, we can ask a question like: \"What are similar products that Alice hasn't yet purchased?\"`}),(0,e.jsx)(n.p,{children:\"The syntax for that statement in PGQL (well, one representation of it), is:\"}),(0,e.jsx)(n.pre,{className:\"language-sql\",children:(0,e.jsxs)(n.code,{className:\"language-sql code-highlight\",children:[(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token comment\",children:\"-- (Alice) -\u003e (Shared Product) \u003c- (Similar User) -\u003e (Recommended Product)\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"SELECT\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"DISTINCT\"}),\" g\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),\"rec_id\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" g\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),`rec_name\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"FROM\"}),\" GRAPH_TABLE \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`       recommender_graph\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"       \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"MATCH\"}),\"   \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"me  \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"IS\"}),\" users    \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"WHERE\"}),\" me\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),\"name \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:\"'Alice'\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"               \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"-\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"[\"}),\":BOUGHT\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"]\"}),(0,e.jsx)(n.span,{className:\"token operator\",children:\"-\"}),(0,e.jsx)(n.span,{className:\"token operator\",children:\"\u003e\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"p   \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"IS\"}),\" product\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token operator\",children:\"\u003c\"}),(0,e.jsx)(n.span,{className:\"token operator\",children:\"-\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"[\"}),\":BOUGHT\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"]\"}),(0,e.jsx)(n.span,{className:\"token operator\",children:\"-\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"sim \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"IS\"}),\" users\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"               \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"-\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"[\"}),\":BOUGHT\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"]\"}),(0,e.jsx)(n.span,{className:\"token operator\",children:\"-\"}),(0,e.jsx)(n.span,{className:\"token operator\",children:\"\u003e\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"rec \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"IS\"}),\" product\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"       \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"COLUMNS\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"me\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),\"id  \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"AS\"}),\" uid\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"                rec\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),\"id \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"AS\"}),\" rec_id\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"                rec\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),\"name \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"AS\"}),\" rec_name\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"AS\"}),` g\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"WHERE\"}),\" \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"NOT\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"EXISTS\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"        \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"SELECT\"}),\" \",(0,e.jsx)(n.span,{className:\"token number\",children:\"1\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"        \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"FROM\"}),`   purchases p\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"        \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"WHERE\"}),\"  p\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),\"user_id    \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" g\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),`uid\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"          \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"AND\"}),\"  p\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),\"product_id \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" g\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),`rec_id\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]})]})}),(0,e.jsx)(n.p,{children:\"That should return:\"}),(0,e.jsx)(n.pre,{className:\"language-md\",children:(0,e.jsxs)(n.code,{className:\"code-highlight language-md\",children:[(0,e.jsx)(n.span,{className:\"code-line\",children:(0,e.jsx)(n.span,{className:\"token table\",children:(0,e.jsxs)(n.span,{className:\"token table-header-row\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"|\"}),(0,e.jsx)(n.span,{className:\"token important table-header\",children:\" Rec id \"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"|\"}),(0,e.jsx)(n.span,{className:\"token important table-header\",children:\" Rec name \"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"|\"}),`\n`]})})}),(0,e.jsx)(n.span,{className:\"code-line\",children:(0,e.jsxs)(n.span,{className:\"token table\",children:[(0,e.jsx)(n.span,{className:\"token table-header-row\"}),(0,e.jsxs)(n.span,{className:\"token table-line\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"|\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":-----\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"|\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":-------\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"|\"}),`\n`]})]})}),(0,e.jsx)(n.span,{className:\"code-line\",children:(0,e.jsxs)(n.span,{className:\"token table\",children:[(0,e.jsx)(n.span,{className:\"token table-line\"}),(0,e.jsxs)(n.span,{className:\"token table-data-rows\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"|\"}),(0,e.jsx)(n.span,{className:\"token table-data\",children:\" 3      \"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"|\"}),(0,e.jsx)(n.span,{className:\"token table-data\",children:\" Keyboard \"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"|\"}),`\n`]})]})})]})}),(0,e.jsxs)(n.p,{children:[\"It seems that \",(0,e.jsx)(n.code,{children:\"Alice\"}),\", having purchased a laptop and a mouse, might appreciate a keyboard! Neat.\"]}),(0,e.jsxs)(n.h1,{id:\"patch-and-build-details\",children:[(0,e.jsx)(n.a,{href:\"#patch-and-build-details\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"Patch and Build Details\"]}),(0,e.jsxs)(n.p,{children:[\"This image was built by applying the most recent collection of patches supplied in the mailing list thread from Junwang Zhao on top of the \",(0,e.jsx)(n.code,{children:\"18beta2\"}),\" source tarzip.\"]}),(0,e.jsx)(n.ul,{children:(0,e.jsx)(n.li,{children:(0,e.jsx)(n.a,{href:\"https://www.postgresql.org/message-id/CAEG8a3L3uZZRT5Ra5%3D9G-SOCEYULejw5eqQE99VL0YfTeX3-BA%40mail.gmail.com\",children:\"https://www.postgresql.org/message-id/CAEG8a3L3uZZRT5Ra5%3D9G-SOCEYULejw5eqQE99VL0YfTeX3-BA%40mail.gmail.com\"})})}),(0,e.jsx)(n.pre,{children:(0,e.jsxs)(n.code,{className:\"code-highlight\",children:[(0,e.jsx)(n.span,{className:\"code-line\",children:`Attachment\tContent-Type\tSize\n`}),(0,e.jsx)(n.span,{className:\"code-line\",children:`v10-0011-do-not-use-default-COLLATE.patch\tapplication/octet-stream\t5.8 KB\n`}),(0,e.jsx)(n.span,{className:\"code-line\",children:`v10-0012-trivial-refactor-of-property-graph-object-addres.patch\tapplication/octet-stream\t17.1 KB\n`}),(0,e.jsx)(n.span,{className:\"code-line\",children:`v10-0010-adapt-property-graph-to-more-intuitive-titles.patch\tapplication/octet-stream\t2.6 KB\n`}),(0,e.jsx)(n.span,{className:\"code-line\",children:`v10-0008-Document-fixes.patch\tapplication/octet-stream\t5.1 KB\n`}),(0,e.jsx)(n.span,{className:\"code-line\",children:`v10-0009-WIP-Do-not-print-empty-columns-table-for-a-prope.patch\tapplication/octet-stream\t14.1 KB\n`}),(0,e.jsx)(n.span,{className:\"code-line\",children:`v10-0007-RLS-tests.patch\tapplication/octet-stream\t182.1 KB\n`}),(0,e.jsx)(n.span,{className:\"code-line\",children:`v10-0006-Property-collation-and-edge-vertex-link-support.patch\tapplication/octet-stream\t114.3 KB\n`}),(0,e.jsx)(n.span,{className:\"code-line\",children:`v10-0005-Access-permissions-on-property-graph.patch\tapplication/octet-stream\t11.9 KB\n`}),(0,e.jsx)(n.span,{className:\"code-line\",children:`v10-0004-Fixes-following-issues.patch\tapplication/octet-stream\t36.2 KB\n`}),(0,e.jsx)(n.span,{className:\"code-line\",children:`v10-0003-Support-cyclic-path-pattern.patch\tapplication/octet-stream\t37.4 KB\n`}),(0,e.jsx)(n.span,{className:\"code-line\",children:`v10-0002-support-WHERE-clause-in-graph-pattern.patch\tapplication/octet-stream\t7.2 KB\n`}),(0,e.jsx)(n.span,{className:\"code-line\",children:`v10-0001-WIP-SQL-Property-Graph-Queries-SQL-PGQ.patch\tapplication/octet-stream\t504.4 KB\n`})]})}),(0,e.jsx)(n.p,{children:\"Additionally, there are some hacky patches in the Dockerfile that strip out a bunch of functionality related to Serbian locale and stemming, to fix compilation errors.\"}),(0,e.jsxs)(n.h1,{id:\"further-reading\",children:[(0,e.jsx)(n.a,{href:\"#further-reading\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"Further Reading\"]}),(0,e.jsxs)(n.ul,{children:[(0,e.jsx)(n.li,{children:(0,e.jsx)(n.a,{href:\"https://pgconf.in/conferences/pgconfin2025/program/proposals/895\",children:\"https://pgconf.in/conferences/pgconfin2025/program/proposals/895\"})}),(0,e.jsx)(n.li,{children:(0,e.jsx)(n.a,{href:\"https://www.enterprisedb.com/blog/representing-graphs-postgresql-sqlpgq\",children:\"https://www.enterprisedb.com/blog/representing-graphs-postgresql-sqlpgq\"})})]}),(0,e.jsxs)(n.h1,{id:\"conclusion\",children:[(0,e.jsx)(n.a,{href:\"#conclusion\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"Conclusion\"]}),(0,e.jsx)(n.p,{children:\"I don't often work in domains that can benefit from the ergonomic enhancements that Property Graphs can provide, but I think it's an invaluable addition to the ISO SQL Standard.\"}),(0,e.jsx)(n.p,{children:\"Looking forward to the day this gets merged in Postgres =)\"})]})}}var E=y;function T(a,s){throw new Error(\"Expected \"+(s?\"component\":\"object\")+\" `\"+a+\"` to be defined: you likely forgot to import, pass, or provide it.\")}return f;})();\n;return Component;","toc":[{"value":"Intro","url":"#intro","depth":1},{"value":"Docker Image with Postgres 18beta2 + SQL/PGQ Patches","url":"#docker-image-with-postgres-18beta2--sqlpgq-patches","depth":1},{"value":"Example: E-Commerce Product Recommendations","url":"#example-e-commerce-product-recommendations","depth":1},{"value":"Patch and Build Details","url":"#patch-and-build-details","depth":1},{"value":"Further Reading","url":"#further-reading","depth":1},{"value":"Conclusion","url":"#conclusion","depth":1}],"frontMatter":{"readingTime":{"text":"6 min read","minutes":5.365,"time":321900,"words":1073},"slug":"postgres-sql-property-graphs","fileName":"postgres-sql-property-graphs.md","title":"Experimenting with SQL:2023 Property-Graph Queries in Postgres 18","date":"2025-07-19T00:00:00.000Z","tags":["postgres","sql"],"draft":false,"summary":"Hands-on guide to the upcoming SQL/PGQ graph syntax using a patched Postgres 18 beta.","images":["/static/images/postgres-sql-pgq-banner.png"]}},"authorDetails":[{"readingTime":{"text":"1 min read","minutes":0.9,"time":54000,"words":180},"slug":["default"],"fileName":"default.md","name":"Gavin Ray","avatar":"/static/images/me.png","occupation":"Code Stuff","company":"PromptQL (formerly known as Hasura)","email":"ray.gavin97@gmail.com","twitter":"https://twitter.com/GavinRayDev","linkedin":"https://www.linkedin.com","github":"https://github.com/GavinRay97","date":null}],"prev":{"title":"Psychedelics as Tools: Reflections After 20+ Compounds and a Decade of Experiments","date":"2025-07-12T00:00:00.000Z","tags":["non-technical","psychedelics"],"draft":false,"summary":"Reflections and hard-won lessons from a decade exploring over 20 psychedelic compounds.","images":["/static/images/Ouroborous-benzene.svg"],"slug":"perspectives-on-psychedelic-use"},"next":{"title":"The Absurdity of the term \"AI Engineer\"","date":"2026-02-22T00:00:00.000Z","tags":["non-technical","ai","opinion"],"draft":false,"summary":"Integrating a third-party LLM SDK does not make you an AI Engineer: a rant on the inflation of job titles in the age of ChatGPT wrappers.","images":["/static/images/ai-engineer-title-absurdity.svg"],"slug":"absurdity-of-ai-engineer-title"}},"__N_SSG":true},"page":"/blog/[...slug]","query":{"slug":["postgres-sql-property-graphs"]},"buildId":"jzP2h-hq2qVCnckH4v1hV","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>